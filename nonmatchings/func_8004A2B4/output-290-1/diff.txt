--- before
+++ after
@@ -979,7 +979,8 @@
       ctrl->prevButton = ctrl->button;
       ctrl->button = pad->button;
       ctrl->pressedButton = ctrl->button & (ctrl->button ^ ctrl->prevButton);
-      ctrl->releasedButton = ctrl->prevButton & (ctrl->button ^ ctrl->prevButton);
+      (*ctrl).releasedButton = ctrl->prevButton & (ctrl->button ^ ctrl->prevButton);
+      pad += 0;
       ctrl->stick_x = pad->stick_x;
       ctrl->stick_y = pad->stick_y;
     }
